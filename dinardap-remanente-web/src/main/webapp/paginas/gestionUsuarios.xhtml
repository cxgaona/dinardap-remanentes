<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui">    
    <ui:composition template="/template/general.xhtml">
        <ui:define name="content">        
            <h1 class="h-wai">#{etiquetas['nombre.sistema']} - #{gestionUsuariosCtrl.tituloPagina}</h1>
            <h:form id="formUsuario">
                <b:panel title="Usuarios">
                    <h:panelGrid columns="1" style="width: 100%;">
                        <p:dataTable id="usuarioTbl"
                                     value="#{gestionUsuariosCtrl.usuarioActivoList}" 
                                     var="usuario"
                                     rowKey="#{usuario.usuarioId}"
                                     selectionMode="single"
                                     selection="#{gestionUsuariosCtrl.usuarioSelected}"
                                     reflow="true" rows="10" paginator="true"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="5,10,25">
                            <!--<p:ajax event="rowSelect" listener="{remanenteMensualCtrl.onRowSelectRemanenteMensual}" update="formTransacciones" />-->
                            <p:column headerText="ID Usuario" rendered="false">
                                <h:outputText value="#{usuario.UsuarioId}"/>
                            </p:column>
                            <p:column headerText="Nombre" sortBy="#{usuario.nombre}" filterBy="#{usuario.nombre}" filterMatchMode="contains">
                                <h:outputText value="#{usuario.nombre}" />
                            </p:column>
                            <p:column headerText="Institución" sortBy="#{usuario.institucionId.nombre}" filterBy="#{usuario.institucionId.nombre}" filterMatchMode="contains">
                                <h:outputText value="#{usuario.institucionId.nombre}" />
                            </p:column>
                            <p:column headerText="Tipo Institución" 
                                      sortBy="#{usuario.institucionId.tipo eq 'REGIONAL'?'Dirección Regional':usuario.institucionId.tipo eq 'GAD'?' Gobierno Autónomo Descentralizado':'Registro Propiedad / Mercantil'}" 
                                      filterBy="#{usuario.institucionId.tipo eq 'REGIONAL'?'Dirección Regional':usuario.institucionId.tipo eq 'GAD'?' Gobierno Autónomo Descentralizado':'Registro Propiedad / Mercantil'}" 
                                      filterMatchMode="contains">
                                <h:outputText value="#{usuario.institucionId.tipo eq 'REGIONAL'?'Dirección Regional':usuario.institucionId.tipo eq 'GAD'?' Gobierno Autónomo Descentralizado':'Registro Propiedad / Mercantil'}" />
                            </p:column>
                            <p:column headerText="Login" sortBy="#{usuario.usuario}" filterBy="#{usuario.usuario}" filterMatchMode="contains">
                                <h:outputText value="#{usuario.usuario}" />
                            </p:column>
                            <p:column headerText="Contraseña" sortBy="#{usuario.contrasena}" filterBy="#{usuario.contrasena}" filterMatchMode="contains" rendered="false">
                                <h:outputText value="#{usuario.contrasena}" />
                            </p:column>
                            <p:column headerText="Registrador" sortBy="#{usuario.registrador}" width="10%">
                                <p:selectBooleanCheckbox value="#{usuario.registrador}" disabled="true" />
                            </p:column>                            
                            <p:column headerText="Validador" sortBy="#{usuario.validador}" width="10%">
                                <p:selectBooleanCheckbox value="#{usuario.validador}" disabled="true"/>
                            </p:column>
                            <p:column headerText="Verificador" sortBy="#{usuario.verificador}" width="10%">
                                <p:selectBooleanCheckbox value="#{usuario.verificador}" disabled="true" />
                            </p:column>
                            <p:column headerText="Administrador" sortBy="#{usuario.administrador}" width="10%">
                                <p:selectBooleanCheckbox value="#{usuario.administrador}" disabled="true" />
                            </p:column>
                        </p:dataTable>  
                        <b:panel style="width: 50%; margin: 3px 0">
                            <b:panelGrid colSpans="3,9" style="width: 100%; margin: 4px 5px;" styleClass="formUsuario">
                                <p:outputLabel for="nombreUsuario" value="Nombre:" />
                                <p:inputText style="width: 100%" id="nombreUsuario" value="#{gestionUsuariosCtrl.usuarioSelected.nombre}" />

                                <p:outputLabel for="loginUsuario" value="Login:" />
                                <p:inputText style="width: 100%" id="loginUsuario" value="#{gestionUsuariosCtrl.usuarioSelected.usuario}" />

                                <p:outputLabel for="contrasenaUsuario" value="Constraseña:" />
                                <p:password id="contrasenaUsuario" value="#{gestionUsuariosCtrl.usuarioSelected.contrasena}" feedback="true" inline="true" 
                                            promptLabel="Ingrese su contraseña" weakLabel="Baja"
                                            goodLabel="Media" strongLabel="Alta" />

                                <!--                                <p:commandButton value="Completar Remanente Mensual"                                      
                                                                                 style="margin-right:20px;" 
                                                                                 icon="fa fa-fw fa-share" />
                                                                <p:commandButton value="Completar Remanente Mensual"                                      
                                                                                 style="margin-right:20px;" 
                                                                                 icon="fa fa-fw fa-share" />-->
                            </b:panelGrid>                            
                        </b:panel>
                    </h:panelGrid>                    
                </b:panel>                
            </h:form>
        </ui:define>
    </ui:composition>
</html>